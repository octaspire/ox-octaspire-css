image: debian/bullseye
packages:
    - build-essential
    - curl
    - sbcl
    - npm
sources:
    - https://git.sr.ht/~octaspire/ox-octaspire-css
tasks:
    - setup: |
        cd
        mkdir ~/npm
        npm config set prefix ~/npm
        export PATH="$PATH:$HOME/npm/bin"
        npm install -g csslint
        curl -O https://beta.quicklisp.org/quicklisp.lisp
        sbcl --load quicklisp.lisp --eval '(progn (quicklisp-quickstart:install) (ql-util:without-prompting (ql:add-to-init-file)) (quit))'
        make --version
    - generate: |
        cd ~/ox-octaspire-css
        pwd
        ls
        make
    - check: |
        cd ~/ox-octaspire-css
        pwd
        ls
        make test
