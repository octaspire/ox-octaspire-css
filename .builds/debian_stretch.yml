image: debian/bullseye
packages:
    - build-essential
    - curl
    - sbcl
    - npm
sources:
    - https://git.sr.ht/~octaspire/ox-octaspire-css
tasks:
    - setup: |
        cd
        mkdir ~/npm
        npm config set prefix ~/npm
        export PATH="$PATH:$HOME/npm/bin"
        npm install -g csslint
        curl -O https://beta.quicklisp.org/quicklisp.lisp
        sbcl --load quicklisp.lisp --eval '(quicklisp-quickstart:install)' --eval '(quit)'
        cd ~/ox-octaspire-css
        pwd
        ls
        make --version
    - build: |
        make all
    - check: |
        make test
